<brut-form>
<form action="/adrs" method="post" class="flex flex-column gap-2 shadow-2-ns mh-auto pa-4-ns br-1 bg-white-ish-ns w-50">
  <% if form.external_id %>
    <input type="hidden" name="external_id" value="<%= form.external_id %>">
  <% end %>
  <%= component Components::TextField.new(
        label: "Title",
        form: form,
        input_name: "title",
        placeholder: "e.g. We Should Write Tests",
        autofocus: true) %>
  <div class="flex items-center gap-2 justify-between">
    <div class="w-100">
      <%= adr_textarea(name: "context", label: "Use case or user story", prefix: "In the context of") %>
    </div>
    <span class="w-4">
      <%= svg("curved-arrow-right-to-bottom-icon") %>
    </span>
  </div>
  <div class="flex items-center gap-2 justify-between">
    <span class="w-4">
      <%= svg("curved-arrow-left-to-bottom-icon") %>
    </span>
    <div class="w-100">
      <%= adr_textarea(name: "facing", label: "Concern or issue", prefix: "Facing") %>
    </div>
  </div>
  <div class="flex items-center gap-2 justify-between">
    <div class="w-100">
      <%= adr_textarea(name: "decision", label: "Bulk of what was decided or option chosen", prefix: "We decided") %>
    </div>
    <span class="w-4">
      <%= svg("curved-arrow-right-to-bottom-icon") %>
    </span>
  </div>
  <div class="flex items-center gap-2 justify-between">
    <span class="w-4">
      <%= svg("curved-arrow-left-to-bottom-icon") %>
    </span>
    <div class="w-100">
      <%= adr_textarea(name: "neglected", label: "Options considered but not chosen", prefix: "And neglected") %>
    </div>
  </div>
  <div class="flex items-center gap-2 justify-between">
    <div class="w-100">
      <%= adr_textarea(name: "achieve", label: "System qualities or desired consequences", prefix: "To achieve") %>
    </div>
    <span class="w-4">
      <%= svg("curved-arrow-right-to-bottom-icon") %>
    </span>
  </div>
  <div class="flex items-center gap-2 justify-between">
    <span class="w-4">
      <%= svg("curved-arrow-left-to-bottom-icon") %>
    </span>
    <div class="w-100">
      <%= adr_textarea(name: "accepting", label: "Downside, trade-offs, or understood consequences", prefix: "Accepting") %>
    </div>
  </div>
  <div class="flex items-center gap-2 justify-between">
    <%= adr_textarea(name: "because", label: "Additional rationale or context", prefix: "because") %>
  </div>
  <input type="hidden" name="refines_adr_external_id" value="<%= form.refines_adr_external_id %>">
  <input type="hidden" name="replaced_adr_external_id" value="<%= form.replaced_adr_external_id %>">
  <div class="flex flex-column items-center justify-between">
    <span class="w-4">
      <%= svg("arrow-bottom-direction-icon") %>
    </span>
  </div>
  <div class="mt-2 flex gap-3 items-center justify-center">
    <%= reject_button %>
    <%= component(Components::Button.new(size: "normal", color: "blue", label: action_label, icon: "edit-list-icon")) %>
    <%= accept_button %>
  </div>
  <a href="/adrs" class="red-300"><span role="none">&larr;</span> Nevermind</a>
</form>
<brut-confirmation-dialog show-warnings>
  <dialog class="bn br-2 shadow-4 bg-red-900 h-40vh w-40vw pos-absolute top-1 left-1 right-1 pa-3">
  <div class="flex flex-column h-100 items-center justify-between gap-3 bg-purple">
    <h1 class="f-3 fw-7"></h1>
    <nav class="flex justify-between w-100 items-center gap-3">
      <%= component(Components::Button.new(size: "normal", color: "orange", label: "Nevermind", value: "cancel", icon: "close-line-icon")) %>
      <%= component(Components::Button.new(size: "normal", color: "green", label: "Accept ADR", value: "ok", icon: "quality-badge-checkmark-icon")) %>
    </nav>
  </div>
  </dialog>
</brut-confirmation-dialog>
</brut-form>
