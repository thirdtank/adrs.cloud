<% if download.ready? %>
  <div class="pa-3 bn shadow-1 br-3 bg-green-900 green-200 dib">
    <h3 class="ma-0 f-3 flex items-center gap-2">
      <span class="w-2"><%= svg("database-download-icon") %></span>
      <span>
        <%= t(component: :download_ready) %>
      </span>
    </h3>
    <p class="p i">
      <%= t(component: :download_ready_text, created: timestamp(download.created_at, format: :full_with_tz), deleted: timestamp(download.delete_at, format: :full_with_tz)) %>
    </p>
    <a href="<%= DownloadsWithExternalIdHandler.routing(external_id: download.external_id) %>" class="f-3 green-200 db">
      <%= t(component: :download) %>
    </a>
    <%= form_tag(for: DownloadsHandler, class: "mt-4") do %>
      <%= component(ButtonComponent.new(
        size: :tiny,
        color: :blue,
        label: t(component: :create_new),
        icon: "database-download-icon",
        confirm: t(component: :create_new_confirmation),
      ))%>
    <p class="p i f-1">
      <%= t(component: :create_new_explanation) %>
    </p>
  <% end %>
  </div>
<% else %>
  <div class="pa-3 bn shadow-1 br-3 bg-yellow-900 yellow-200 dib">
    <h3 class="ma-0 f-3 flex items-center gap-2">
      <span class="w-2 flex items-center rotating"><%= svg("loader-icon") %></span>
      <span>
        <%= t(component: :download_being_assembled) %>
      </span>
    </h3>
    <p class="p i mb-0">
      <%= t(component: :assembled_message) %>
    </p>
  </div>
<% end %>
