<section class="flex w-100">
  <nav class="bg-gray-200 gray-800 w-6 h-100vh flex flex-column justify-between">
    <div class="flex flex-column overflow-y-scroll">
      <div class="flex flex-column gap-2 items-center">
        <header class="h-4 pa-3 flex items-center gap-2 w-100 mt-3">
          <span class="w-4">
            <%= svg("architectural-icon") %>
          </span>
          <h1 class="f-5 ma-0"><%= t(:adrpg) %></h1>
        </header>
        <a class="f-2 fw-5 blue-800 db pb-3" href="<%= AdrsPage.routing %>">&larr; <%= t(page: :back_to_adrs) %></a>
      </div>
      <brut-tabs role="tablist" aria-orientation="vertical" class="adr-page-tabs" show-warnings tab-selection-pushes-and-restores-state>
        <% tabs.each do |tab| %>
          <a href="?tab=<%= tab.name %>"
           role="tab"
           <% if tab == selected_tab %>
             aria-selected="true"
             tabindex="0"
           <% else %>
             tabindex="-1"
           <% end %>
           aria-controls="<%= tab.name %>-panel"
           id="<%= tab.name %>-tab"
           >
           <span class="flex items-center justify-end gap-2">
             <span><%= t(page: [ "tabs", tab.name, "title" ] )%></span>
             <span class="w-2"><%= svg(tab.icon) %></span>
           </span>
        </a>
      <% end %>
      </brut-tabs>
    </div>
    <div class="w-100 bg-gray-300 gray-900 flex flex-column gap-2 ph-3 pv-3">
      <a class="orange-800 f-1 db" href="<%= HelpPage.routing %>"><%= t(:help) %></a>
      <a class="orange-800 f-1 db" href="<%= LogoutHandler.routing %>"><%= t(:logout) %></a>
    </div>
  </nav>
  <section class="bg-gray-900 gray-100 w-100 h-100vh pb-3 flex flex-column items-start">
    <%= component(AnnouncementBannerComponent) %>
    <div class="overflow-y-scroll w-100">
      <%= tab_panel("adr-style") do %>
        <form autocomplete="off">
          <fieldset class="bn flex items-start gap-3">
            <label class="ba br-3 bc-gray-700 self-stretch">
              <div class="flex items-center gap-2 bb bc-gray-700 pa-2">
                <input type="radio" name="adr_style" value="formula" checked required>
                <span class="f-2 b"><%= t(page: "adr-style-examples.formula.name") %></span>
              </div>
              <div class="pa-2">
                <h3 class="f-3 mt-1"><%= t(page: "adr-style-examples.formula.title") %></h3>
                <p class="p f-1">
                  <%= t(page: "adr-style-examples.formula.context") %>
                </p>
                <p class="p f-1">
                  <%= t(page: "adr-style-examples.formula.facing") %>
                </p>
                <p class="p f-1">
                  <%= t(page: "adr-style-examples.formula.decision") %>
                </p>
              </div>
            </label>
            <label class="ba br-3 bc-gray-700 self-stretch">
              <div class="flex items-center gap-2 bb bc-gray-700 pa-2">
                <input type="radio" name="adr_style" value="fields" required>
                <span class="f-2 b"><%= t(page: "adr-style-examples.fields.name") %></span>
              </div>
              <div class="pa-2">
                <h3 class="f-3 mt-1 lh-titler"><%= t(page: "adr-style-examples.fields.title") %></h3>
                <h4 class="f-2 ma-0 mt-1">
                  <%= t(page: "adr-style-examples.fields.context.title") %>
                </h4>
                <p class="p f-1">
                  <%= t(page: "adr-style-examples.fields.context.content") %>
                </p>
                <h4 class="f-2 ma-0 mt-1">
                  <%= t(page: "adr-style-examples.fields.facing.title") %>
                </h4>
                <p class="p f-1">
                  <%= t(page: "adr-style-examples.fields.facing.content") %>
                </p>
                <h4 class="f-2 ma-0 mt-1">
                  <%= t(page: "adr-style-examples.fields.decision.title") %>
                </h4>
                <p class="p f-1">
                  <%= t(page: "adr-style-examples.fields.decision.content") %>
                </p>
              </div>
            </label>
          </fieldset>
          <div class="pa-3">
            <%= component(ButtonComponent.new(
              color: :orange,
              label: "Change Style",
              icon: "edit-list-icon",
              confirm: "You may need to change existing ADRs to accommodate the style change.",
            )) %>
          </div>
        </form>
      <% end %>
      <%= tab_panel("projects") do %>
        <table class="collapse mv-3 striped">
          <caption class="sr-only">Projects</caption>
          <thead>
            <tr>
              <th class="tl ws-nowrap f-1 ttu b pa-2 bb bc-gray-600">
                Name
              </th>
              <th class="tl ws-nowrap f-1 ttu b pa-2 bb bc-gray-600">
                Description
              </th>
              <th class="tl ws-nowrap f-1 ttu b pa-2 bb bc-gray-600">
                <span class="sr-only">
                  Actions
                </span>
              </th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="ws-nowrap bl pa-2 lh-copy va-middle bb br bc-gray-600">
                ADRPG
              </td>
              <td class="measure p f-1 pa-2 lh-copy va-middle bb br bc-gray-600">
                An app to manage ADRs for your projects, and allow sharing them with others.
              </td>
              <td class="pa-2 tr va-middle bb br bc-gray-600">
                <div class="flex items-baseline gap-2">
                  <a class="blue-400 ws-nowrap" href="#">Edit</a>
                  <a class="blue-400 ws-nowrap" href="#">Archive</a>
                </div>
              </td>
            </tr>
            <tr>
              <td class="ws-nowrap bl pa-2 lh-copy va-middle bb br bc-gray-600">
                BrutRB
              </td>
              <td class="measure p f-1 pa-2 lh-copy va-middle bb br bc-gray-600">
                A new way to make web apps with Ruby that relies on object-oriented programming, simple constructs, and parity with existing web technology fundamentals.
              </td>
              <td class="pa-2 tr va-middle bb br bc-gray-600">
                <div class="flex items-baseline gap-2">
                  <a class="blue-400 ws-nowrap" href="#">Edit</a>
                  <a class="blue-400 ws-nowrap" href="#">Archive</a>
                </div>
              </td>
            </tr>
          </tbody>
        </table>
        <a href="#" class="db pv-3 blue-300 f-2">Add New Project</a>
      <% end %>
      <%= tab_panel("download") do %>
      <% end %>
      <%= tab_panel("info") do %>
        <h3 class="f-3 ma-0">Personal Data</h3>
        <dl class="flex items-baseline gap-2 ph-3">
          <dt class="b">Email</dt>
          <dd><%= authenticated_account.account.email %></dd>
        </dl>
        <h3 class="f-3 ma-0 mt-4">Limits</h3>
        <div class="w-50 pa-3 flex flex-column items-center">
          <meter class="w-100" value="<%= authenticated_account.entitlements.non_rejected_adrs %>" high="<%= authenticated_account.entitlements.max_non_rejected_adrs * 0.85 %>" min="0" max="<%= authenticated_account.entitlements.max_non_rejected_adrs %>"></meter>
          <div class="p f-1 gray-300">
            <% if authenticated_account.entitlements.can_add_new? %>
              <%= t(:adrs_remaining_counts, num: authenticated_account.entitlements.non_rejected_adrs_remaining, max: authenticated_account.entitlements.max_non_rejected_adrs) %>
            <% else %>
              <p class="p ma-0 fw-7 red-300">
                <%= t(:add_new_limit_exceeded) %>
              </p>
              <p class="p ma-0 fw-4">
                <%= html_safe!(t(:contact_support_for_limit_increase)) %>
              </p>
            <% end %>
          </div>
          <meter class="w-100 mt-3" value="<%= authenticated_account.entitlements.non_rejected_adrs %>" high="<%= authenticated_account.entitlements.max_non_rejected_adrs * 0.85 %>" min="0" max="<%= authenticated_account.entitlements.max_non_rejected_adrs %>"></meter>
          <div class="p f-1 gray-300">
            <% if authenticated_account.entitlements.can_add_new? %>
              <%= t(:projects_remaining_counts, num: authenticated_account.entitlements.non_rejected_adrs_remaining, max: authenticated_account.entitlements.max_non_rejected_adrs) %>
            <% else %>
              <p class="p ma-0 fw-7 red-300">
                <%= t(:project_limit_exceeded) %>
              </p>
              <p class="p ma-0 fw-4">
                <%= html_safe!(t(:contact_support_for_limit_increase)) %>
              </p>
            <% end %>
          </div>
        </div>
      <% end %>
    </div>
  </section>
</section>
<%= component(ConfirmationDialogComponent) %>
