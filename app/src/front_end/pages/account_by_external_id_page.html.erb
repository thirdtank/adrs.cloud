<section class="flex w-100">
  <nav class="bg-gray-200 gray-800 w-6 h-100vh flex flex-column justify-between">
    <div class="flex flex-column overflow-y-scroll">
      <div class="flex flex-column gap-2 items-center">
        <header class="h-4 pa-3 flex items-center gap-2 w-100 mt-3">
          <span class="w-4">
            <%= svg("architectural-icon") %>
          </span>
          <h1 class="f-5 ma-0"><%= t(:adrpg) %></h1>
        </header>
        <a class="f-2 fw-5 blue-800 db pb-3" href="<%= AdrsPage.routing %>">&larr; <%= t(page: :back_to_adrs) %></a>
      </div>
      <brut-tabs role="tablist" aria-orientation="vertical" class="adr-page-tabs" show-warnings tab-selection-pushes-and-restores-state>
        <% tabs.each do |tab| %>
          <a href="?tab=<%= tab.name %>"
           role="tab"
           <% if tab == selected_tab %>
             aria-selected="true"
             tabindex="0"
           <% else %>
             tabindex="-1"
           <% end %>
           aria-controls="<%= tab.name %>-panel"
           id="<%= tab.name %>-tab"
           >
           <span class="flex items-center justify-end gap-2">
             <span><%= t(page: [ "tabs", tab.name, "title" ] )%></span>
             <span class="w-2"><%= svg(tab.icon) %></span>
           </span>
        </a>
      <% end %>
      </brut-tabs>
    </div>
    <div class="w-100 bg-gray-300 gray-900 flex flex-column gap-2 ph-3 pv-3">
      <a class="orange-800 f-1 db" href="<%= HelpPage.routing %>"><%= t(:help) %></a>
      <a class="orange-800 f-1 db" href="<%= LogoutHandler.routing %>"><%= t(:logout) %></a>
    </div>
  </nav>
  <section class="bg-gray-900 gray-100 w-100 h-100vh pb-3 flex flex-column items-start">
    <%= component(AnnouncementBannerComponent) %>
    <div class="overflow-y-scroll w-100">
      <%= tab_panel("projects") do %>
        <table class="collapse mv-3 striped">
          <caption class="sr-only">Projects</caption>
          <thead>
            <tr>
              <th class="tl ws-nowrap f-1 ttu b pa-2 bb bc-gray-600">
                Name
              </th>
              <th class="tl ws-nowrap f-1 ttu b pa-2 bb bc-gray-600">
                Description
              </th>
              <th class="tl ws-nowrap f-1 ttu b pa-2 bb bc-gray-600">
                Default Sharing
              </th>
              <th class="tl ws-nowrap f-1 ttu b pa-2 bb bc-gray-600">
                <span class="sr-only">
                  Actions
                </span>
              </th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="ws-nowrap bl pa-2 lh-copy va-middle bb br bc-gray-600">
                ADRPG
              </td>
              <td class="measure p f-1 pa-2 lh-copy va-middle bb br bc-gray-600">
                An app to manage ADRs for your projects, and allow sharing them with others.
              </td>
              <td class="pa-2 lh-copy va-middle bb br bc-gray-600">
                <div class="flex items-center gap-2">
                  <span class="w-3 flex flex-column justify-center"><%= svg("globe-network-icon") %></span>
                  <span><%= t(page: [ "projects", "default_shared" ]) %></span>
                </div>
              </td>
              <td class="pa-2 tr va-middle bb br bc-gray-600">
                <div class="flex items-baseline gap-2">
                  <a class="blue-400 ws-nowrap" href="#">Edit</a>
                  <form>
                    <brut-confirm
                      message="ADRs will still be available and editable, but no new ADRs can be added to this project">
                      <button class="tdu pointer blue-400 bn bg-none">Archive</button>
                    </brut-confirm>
                  </form>
                </div>
              </td>
            </tr>
            <tr>
              <td class="ws-nowrap bl pa-2 lh-copy va-middle bb br bc-gray-600">
                BrutRB
              </td>
              <td class="measure p f-1 pa-2 lh-copy va-middle bb br bc-gray-600">
                A new way to make web apps with Ruby that relies on object-oriented programming, simple constructs, and parity with existing web technology fundamentals.
              </td>
              <td class="pa-2 lh-copy va-middle bb br bc-gray-600">
                <div class="flex items-center gap-2">
                  <span class="w-3 flex flex-column justify-center"><%= svg("lock-icon") %></span>
                  <span><%= t(page: [ "projects", "default_private" ]) %></span>
                </div>
              </td>
              <td class="pa-2 tr va-middle bb br bc-gray-600">
                <div class="flex items-baseline gap-2">
                  <a class="blue-400 ws-nowrap" href="#">Edit</a>
                  <form>
                    <brut-confirm
                      message="ADRs will still be available and editable, but no new ADRs can be added to this project">
                      <button class="tdu pointer blue-400 bn bg-none">Archive</button>
                    </brut-confirm>
                  </form>
                </div>
              </td>
            </tr>
          </tbody>
        </table>
        <a href="#" class="db pv-3 blue-300 f-2">Add New Project</a>
      <% end %>
      <%= tab_panel("download") do %>
      <% end %>
      <%= tab_panel("info") do %>
        <h3 class="f-3 ma-0">Personal Data</h3>
        <dl class="flex items-baseline gap-2 ph-3">
          <dt class="b">Email</dt>
          <dd><%= authenticated_account.account.email %></dd>
        </dl>
        <h3 class="f-3 ma-0 mt-4">Limits</h3>
        <div class="w-50 pa-3 flex flex-column items-center">
          <meter class="w-100" value="<%= authenticated_account.entitlements.non_rejected_adrs %>" high="<%= authenticated_account.entitlements.max_non_rejected_adrs * 0.85 %>" min="0" max="<%= authenticated_account.entitlements.max_non_rejected_adrs %>"></meter>
          <div class="p f-1 gray-300">
            <% if authenticated_account.entitlements.can_add_new? %>
              <%= t(:adrs_remaining_counts, num: authenticated_account.entitlements.non_rejected_adrs_remaining, max: authenticated_account.entitlements.max_non_rejected_adrs) %>
            <% else %>
              <p class="p ma-0 fw-7 red-300">
                <%= t(:add_new_limit_exceeded) %>
              </p>
              <p class="p ma-0 fw-4">
                <%= html_safe!(t(:contact_support_for_limit_increase)) %>
              </p>
            <% end %>
          </div>
          <meter class="w-100 mt-3" value="<%= authenticated_account.entitlements.non_rejected_adrs %>" high="<%= authenticated_account.entitlements.max_non_rejected_adrs * 0.85 %>" min="0" max="<%= authenticated_account.entitlements.max_non_rejected_adrs %>"></meter>
          <div class="p f-1 gray-300">
            <% if authenticated_account.entitlements.can_add_new? %>
              <%= t(:projects_remaining_counts, num: authenticated_account.entitlements.non_rejected_adrs_remaining, max: authenticated_account.entitlements.max_non_rejected_adrs) %>
            <% else %>
              <p class="p ma-0 fw-7 red-300">
                <%= t(:project_limit_exceeded) %>
              </p>
              <p class="p ma-0 fw-4">
                <%= html_safe!(t(:contact_support_for_limit_increase)) %>
              </p>
            <% end %>
          </div>
        </div>
      <% end %>
    </div>
  </section>
</section>
<%= component(ConfirmationDialogComponent) %>
