<section class="flex w-100">
  <nav class="bg-gray-200 gray-800 w-6 h-100vh flex flex-column justify-between">
    <div class="flex flex-column overflow-y-scroll">
      <header class="pa-3 w-100 pt-4 flex items-center gap-2">
        <h1 class="f-4 ma-0 flex items-center gap-2">
          <span class="f-5">
            <%= svg("architectural-icon") %>
          </span>
          <%= t(:adrscloud) %>
        </h1>
      </header>
      <div class="pb-3 pr-3">
        <% if can_add_new? %>
          <a href="<%= NewDraftAdrPage.routing %>"
             class="green-500 bc-green-200 f-3 tc w-100 db bt bb br br-right-1 bg-black pa-2 active-bg-gray-300">
             <%= t(page: :add_new) %>
          </a>
        <% else %>
          <span class="gray-700 i bc-gray-200 f-3 tc w-100 db bt bb br br-right-1 pa-2 bg-gray-600 cursor-not-allowed" title="<%= t(:add_new_limit_exceeded) %>">
             <%= t(page: :add_new) %>
          </span>
        <% end %>
      </div>
      <%= component(AdrsPage::TabComponent.new(
        tabs: {
          accepted: "check-mark-icon",
          drafts: "edit-list-icon",
          replaced: "change-icon",
          rejected: "recycle-bin-line-icon",
        },
        selected_tab: tab,
        css_class: "adr-page-tabs",
      )) %>
    </div>
    <div class="w-100 bg-gray-300 gray-900 flex flex-column gap-2 ph-3 pv-3">
      <a class="orange-800 f-1 db" href="<%= AccountByExternalIdPage.routing(external_id: authenticated_account.external_id) %>"><%= t(page: :your_account) %></a>
      <a class="orange-800 f-1 db" href="<%= HelpPage.routing %>"><%= t(:help) %></a>
      <a class="orange-800 f-1 db" href="<%= LogoutHandler.routing %>"><%= t(:logout) %></a>
    </div>
  </nav>
  <section class="bg-gray-900 gray-100 w-100 h-100vh pb-3 flex flex-column items-start">
    <%= component(AnnouncementBannerComponent) %>
    <div class="overflow-y-scroll w-100">
      <div class="mh-3 mt-3 shadow-1 dib bg-purple-900 br-2">
        <adr-include-query-params>
          <form class="pa-3 flex items-center gap-3 bb bc-gray-700">
            <label class="flex items-center gap-2">
              <span class="f-1 fw-6">Project:</span>
              <brut-autosubmit>
                <%= project_select %>
              </brut-autosubmit>
            </label>
            <label class="flex items-center gap-2">
              <span class="f-1 fw-6">Tag:</span>
              <input type="search" name="tag" value="<%= tag %>" id="tag-search-input" class="text-field text-field--tiny" placeholder="<%= t(page: :tag_filter_placeholder) %>">
            </label>
            <%= component(ButtonComponent.new(size: :tiny, color: :purple, label: "Filter", icon: "layer-icon")) %>
            <% if filtered? %>
              <a href="?" class="blue-400 f-1"><%= t(page: :remove_filter) %></a>
            <% end %>
          </form>
        </adr-include-query-params>
      </div>
      <%= component(
        AdrsPage::TabPanelComponent.new(adrs: accepted_adrs,
                                        tag: tag,
                                        project: project,
                                        selected: tab == :accepted,
                                        tab: :accepted,
                                        columns: [ :title, :project, :accepted_at ],
                                        action: :view)
      ) %>
      <%= component(
        AdrsPage::TabPanelComponent.new(adrs: draft_adrs,
                                        tab: :drafts,
                                        tag: tag,
                                        project: project,
                                        selected: tab == :drafts,
                                        columns: [ :title, :project, :created_at ],
                                        action: :edit)
      )%>
      <%= component(
        AdrsPage::TabPanelComponent.new(adrs: replaced_adrs,
                                        selected: tab == :replaced,
                                        tab: :replaced,
                                        tag: tag,
                                        project: project,
                                        columns: [ :title, :project, :created_at ],
                                        action: :view)
      ) %>
      <%= component(
        AdrsPage::TabPanelComponent.new(adrs: rejected_adrs,
                                        tab: :rejected,
                                        selected: tab == :rejected,
                                        tag: tag,
                                        project: project,
                                        columns: [ :title, :project, :created_at, :rejected_at ],
                                        action: :view)
      )%>
    </div>
  </section>
</section>
